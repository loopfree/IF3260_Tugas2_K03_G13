<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test </title>
  <script src="./global.js" defer></script>
  <script src="./matrix-util.js" defer></script>
  <script src="./script.js" defer></script>
  <script src="./ui.js" defer></script>

  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div id="content">
    <div class="flex-row">
      <div class="flex-col">
        <div name="translation" class="subcontent">
          <div class="subtitle">
            Translation
          </div>
          <div id="x">
            <p>X Translation</p>
            <input id="x-translation" type="range" min="0" max="1000" value="0"/>
            <label id="x-translation-value" class="value"></label>
          </div>
          <div id="y">
            <p>Y Translation</p>
            <input id="y-translation" type="range" min="0" max="1000" value="0"/>
            <label id="y-translation-value" class="value"></label>
          </div>
          <div id="z">
            <p>Y Translation</p>
            <input id="z-translation" type="range" min="0" max="1000" value="0"/>
            <label id="z-translation-value" class="value"></label>
          </div>
        </div>
        <div name="rotation" class="subcontent">
          <div class="subtitle">
            Rotation
          </div>
          <div id="x">
            <p>X Rotation</p>
            <input id="x-rotation" type="range" min="0" max="360" value="0"/>
            <label id="x-rotation-value" class="value"></label>
          </div>
          <div id="y">
            <p>Y Rotation</p>
            <input id="y-rotation" type="range" min="0" max="360" value="0"/>
            <label id="y-rotation-value" class="value"></label>
          </div>
          <div id="z">
            <p>Y rotation</p>
            <input id="z-rotation" type="range" min="0" max="360" value="0"/>
            <label id="z-rotation-value" class="value"></label>
          </div>
        </div>
      </div>
      <div class="flex-col">
        <div name="scaling" class="subcontent">
          <div class="subtitle">
            Scaling
          </div>
          <div id="x">
            <p>X Scaling</p>
            <input id="x-scaling" type="range" min="0" max="5" step="0.05" value="0"/>
            <label id="x-scaling-value" class="value"></label>
          </div>
          <div id="y">
            <p>Y Scaling</p>
            <input id="y-scaling" type="range" min="0" max="5" step="0.05" value="0"/>
            <label id="y-scaling-value" class="value"></label>
          </div>
          <div id="z">
            <p>Z Scaling</p>
            <input id="z-scaling" type="range" min="0" max="5" step="0.05" value="0"/>
            <label id="z-scaling-value" class="value"></label>
          </div>
        </div>
        <div class="subcontent">
          <div class="subtitle">
            Camera
          </div>
          <div id="x">
            <p>X Camera</p>
            <input id="x-camera-rotation" type="range" min="0" max="360" value="0"/>
            <label id="x-camera-value" class="value"></label>
          </div>
          <div id="y">
            <p>Y Camera</p>
            <input id="y-camera-rotation" type="range" min="0" max="360" value="0"/>
            <label id="y-camera-value" class="value"></label>
          </div>
          <div id="z">
            <p>Y Camera</p>
            <input id="z-camera-rotation" type="range" min="0" max="360" value="0"/>
            <label id="z-camera-value" class="value"></label>
          </div>
          <div id="zoom-manager">
            <p>Zoom</p>
            <input id="zoom" type="range" min="0" max="5" step="0.05" value="0"/>
            <label id="zoom-value" class="value"></label>
          </div>
        </div>
      </div>
      <div class="flex-col">
        <div class="subcontent">
          <div class="subtitle">
            File
          </div>
          <div id="load-obj">
            <p>Load</p>
            <input id="load" type="file" accept=".json"/>
          </div>
          <div id="save-obj">
            <p>Save</p>
            <input id="save" type="button" value="Save"/>
          </div>
        </div>
        <div class="subcontent">
          <div class="subtitle">
            Projection
          </div>
          <div class="flex-col projection">
            <button id="ortographic">Ortographic</button>
            <button id="oblique">Oblique</button>
            <button id="perspective">Perspective</button>
          </div>
        </div>
        <div class="subcontent">
          <div class="subtitle">
            Shading
          </div>
          <label for="shading">Shading</label>
          <input id="shading" type="checkbox" />
        </div>
      </div>
      <div class="flex-col">
        <div class="subcontent">
          <div class="subtitle">
            Util
          </div>
          <div class="flex-col util">
            <button id="help">Help</button>
            <button id="reset">Reset</button>
          </div>
        </div>
      </div>
    </div>
    <canvas id="canvas" width="800px" height="600px"></canvas>
  </div>

  <!-- Shader -->
  <script  id="vertex-shader-3d" type="x-shader/x-vertex">
    attribute vec4 a_position;
    attribute vec4 a_color;
    attribute vec3 a_normal;
    
    uniform mat4 u_matrix;
    uniform mat4 u_normal_matrix;
    
    varying vec4 v_color;
    varying highp vec3 v_lighting;
    
    void main() {
        gl_Position = u_matrix * a_position;
        
        v_color = a_color;

        highp vec3 ambientLight = vec3(0.3, 0.3, 0.3);
        highp vec3 directionalLightColor = vec3(1, 1, 1);
        highp vec3 directionalVector = normalize(vec3(0.85, 0.8, 0.75));

        highp vec4 transformedNormal = u_normal_matrix * vec4(a_normal, 1.0);

        highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);
        v_lighting = ambientLight + (directionalLightColor * directional);
    }
  </script>
  
  <script  id="fragment-shader-3d" type="x-shader/x-fragment">
  precision mediump float;

  varying vec4 v_color;
  varying highp vec3 v_lighting;
  
  uniform bool u_shading_flag;
  
  void main() {
        if (u_shading_flag){
            gl_FragColor = vec4(v_color.rgb * v_lighting, v_color.a);
        }
        else {
            gl_FragColor = v_color;
        }
  }
  </script>
</body>
</html>